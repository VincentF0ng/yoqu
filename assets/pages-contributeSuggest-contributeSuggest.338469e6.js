import{E as e,L as a,G as t,k as l,o,a as r,w as u,g as s,d as n,u as i,b as m,F as d,f as p,r as f,i as c}from"./index-ab7ec73d.js";import{_ as h}from"./uni-data-picker.c1aa8bd2.js";import{r as y}from"./uni-app.es.f46513ae.js";import{_ as V,a as _}from"./uni-forms.558fa597.js";import{_ as D}from"./uni-easyinput.e7315f99.js";import{_ as b}from"./uni-data-checkbox.3fa5ad8a.js";import{_ as x}from"./uni-icons.63e5f710.js";import{_ as g}from"./v-btn.692ac0fd.js";import{_ as q}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-load-more.73ff6927.js";const j=q({data:()=>({type:1,types:[{value:1,text:"投稿 - 海龟汤"},{value:2,text:"建议"}],formData:{title:"",question:"",answer:"",authour:"",share:1,contact:"",content:""},rules:{title:{rules:[{required:!0,errorMessage:"标题不能为空"}]},question:{rules:[{required:!0,errorMessage:"汤面不能为空"}]},answer:{rules:[{required:!0,errorMessage:"汤底不能为空"}]},content:{rules:[{required:!0,errorMessage:"内容不能为空"}]}}}),methods:{submit(o){this.$refs[o].validate().then((o=>{const r=this.type;if(e({title:"上传中"}),1===r){a.importObject("tutleSoupsOptions").addOne(o).then((e=>{t(),l({title:"感谢投稿，后台审核成功后将在列表页置顶喔。",icon:"none",duration:4e3}),this.formData.title="",this.formData.question="",this.formData.answer="",this.formData.content=""})).catch((e=>{t(),l({title:"提交失败",icon:"error"})}))}else if(2===r){a.importObject("suggestionOptions").addOne(o).then((e=>{t(),l({title:"感谢建议"}),this.formData.content=""})).catch((e=>{t(),l({title:"提交失败",icon:"error"})}))}}))}},onLoad:function(e){e.type&&this.$nextTick((a=>{this.type=Number(e.type)||1}))}},[["render",function(e,a,t,l,q,j){const k=y(f("uni-data-picker"),h),v=y(f("uni-forms-item"),V),w=y(f("uni-easyinput"),D),U=y(f("uni-data-checkbox"),b),O=s,F=y(f("uni-forms"),_),M=c,E=y(f("uni-icons"),x),H=y(f("v-btn"),g);return o(),r(O,{class:"form-wrap"},{default:u((()=>[n(F,{ref:"valiForm",rules:q.rules,modelValue:q.formData,"label-width":"75px"},{default:u((()=>[n(v,{label:"类型",name:"type",required:""},{default:u((()=>[n(k,{modelValue:q.type,"onUpdate:modelValue":a[0]||(a[0]=e=>q.type=e),localdata:q.types,"clear-icon":!1},null,8,["modelValue","localdata"])])),_:1}),2===q.type?(o(),r(v,{key:0,label:"建议",required:"",name:"content"},{default:u((()=>[n(w,{type:"textarea",modelValue:q.formData.content,"onUpdate:modelValue":a[1]||(a[1]=e=>q.formData.content=e),autoHeight:"",placeholder:"请输入建议"},null,8,["modelValue"])])),_:1})):(o(),i(d,{key:1},[n(v,{label:"标题",required:"",name:"title"},{default:u((()=>[n(w,{modelValue:q.formData.title,"onUpdate:modelValue":a[2]||(a[2]=e=>q.formData.title=e),trim:"all",placeholder:"请输入标题"},null,8,["modelValue"])])),_:1}),n(v,{label:"汤面",required:"",name:"question"},{default:u((()=>[n(w,{type:"textarea",modelValue:q.formData.question,"onUpdate:modelValue":a[3]||(a[3]=e=>q.formData.question=e),autoHeight:"",placeholder:"请输入汤面"},null,8,["modelValue"])])),_:1}),n(v,{label:"汤底",required:"",name:"answer"},{default:u((()=>[n(w,{type:"textarea",modelValue:q.formData.answer,"onUpdate:modelValue":a[4]||(a[4]=e=>q.formData.answer=e),autoHeight:"",placeholder:"请输入汤底"},null,8,["modelValue"])])),_:1}),n(v,{label:"作者",name:"authour"},{default:u((()=>[n(w,{modelValue:q.formData.authour,"onUpdate:modelValue":a[5]||(a[5]=e=>q.formData.authour=e),placeholder:"请输入作者"},null,8,["modelValue"])])),_:1}),n(v,{label:"允许转发",name:"share"},{default:u((()=>[n(U,{mode:"tag",selectedColor:"#6d5dfc",modelValue:q.formData.share,"onUpdate:modelValue":a[6]||(a[6]=e=>q.formData.share=e),localdata:[{text:"是",value:1},{text:"否",value:0}]},null,8,["modelValue"])])),_:1}),0===q.formData.share?(o(),r(v,{key:0,label:"联系方式",name:"contact"},{default:u((()=>[n(w,{modelValue:q.formData.contact,"onUpdate:modelValue":a[7]||(a[7]=e=>q.formData.contact=e),placeholder:"请输入联系方式"},null,8,["modelValue"])])),_:1})):m("",!0)],64)),n(O,{class:"msg"},{default:u((()=>[1===q.type&&0===q.formData.share?(o(),r(O,{key:0},{default:u((()=>[p("不允许转发将在文章中注明，并展示您的联系方式，感谢投稿。")])),_:1})):m("",!0)])),_:1})])),_:1},8,["rules","modelValue"]),n(H,{class:"btn",type:"primary",onClick:a[8]||(a[8]=e=>j.submit("valiForm"))},{default:u((()=>[n(M,{style:{"margin-right":"10px"}},{default:u((()=>[p("提交")])),_:1}),n(E,{type:"paperplane-filled",size:"20",color:"#E4EBF5"})])),_:1})])),_:1})}],["__scopeId","data-v-5c0101db"]]);export{j as default};
