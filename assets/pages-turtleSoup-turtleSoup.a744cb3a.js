import{H as e,I as a,o as t,a as s,w as n,m as l,g as r,d as i,J as d,K as o,f as c,t as u,p,q as h,F as f,b,i as m,r as y,u as _}from"./index.d9f4ebbb.js";import{_ as g}from"./uni-icons.be7bee54.js";import{_ as k,r as w}from"./uni-app.es.5b214af4.js";import{_ as S,a as C,b as R,c as U,d as x}from"./unicloud-db.2de107ce.js";import{_ as $}from"./uni-tag.cea29736.js";import{_ as I}from"./uni-load-more.3e8572bc.js";const K=k({data:()=>({bannerAdpid:"",bannerUnitId:"",type:0,searchKey:""}),computed:{where(){const e=this.searchKey.trim();let a="";switch(this.type){case 1:a="&& chosen == 1";break;case 2:a="&& classic == 1";break;case 3:a="&& contribute == 1";break;default:a=""}return`\n\t\t\t\t(${new RegExp(e,"i")}.test(title) || ${new RegExp(e,"i")}.test(question) || ${new RegExp(e,"i")}.test(answer)) && \n\t\t\t\tstatus == 2\n\t\t\t\t${a}\n\t\t\t`}},methods:{handleTypeSelect(){e({itemList:["全部","精选好汤","经典老汤","网友投稿"],success:e=>{this.type=e.tapIndex,this.$nextTick((e=>{this.handleSearch()}))}})},handleSearch(){this.$refs.udbRef.loadData({clear:!0})},handleClear(){this.searchKey="",this.$nextTick((e=>{this.$refs.udbRef.loadData({clear:!0})}))}},onReady(){this.$refs.udbRef.loadData({clear:!0})},onLoad(){l().getConfig().then((e=>{this.bannerAdpid=e.bannerAdpid||"",this.bannerUnitId=e.bannerUnitId||""}))},onPullDownRefresh(){this.$refs.udbRef.loadData({clear:!0},(()=>{a()}))},onReachBottom(){this.$refs.udbRef.loadMore()},onShareAppMessage:()=>({title:"海龟汤 - 是，否，与此无关？",path:"/pages/turtleSoup/turtleSoup",imageUrl:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-9c9554a3-d4de-4f0f-b941-dfe1990da1c1/67ffde71-5506-47e8-b8e1-a900aae92998.png"}),onShareTimeline:()=>({title:"海龟汤 - 是，否，与此无关？",path:"/pages/turtleSoup/turtleSoup",imageUrl:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-9c9554a3-d4de-4f0f-b941-dfe1990da1c1/67ffde71-5506-47e8-b8e1-a900aae92998.png"})},[["render",function(e,a,l,k,K,v){const D=m,j=w(y("uni-icons"),g),A=r,E=w(y("uni-search-bar"),S),T=w(y("uni-nav-bar"),C),V=_,z=w(y("uni-tag"),$),M=w(y("uni-list-item"),R),q=w(y("uni-list"),U),B=w(y("uni-load-more"),I),G=w(y("unicloud-db"),x);return t(),s(A,{class:"container"},{default:n((()=>[i(T,{class:"search-wrap"},{left:n((()=>[i(A,{class:"search-left",onClick:v.handleTypeSelect},{default:n((()=>[d(i(D,null,{default:n((()=>[c("全部")])),_:1},512),[[o,0===K.type]]),d(i(D,null,{default:n((()=>[c("精选")])),_:1},512),[[o,1===K.type]]),d(i(D,null,{default:n((()=>[c("经典")])),_:1},512),[[o,2===K.type]]),d(i(D,null,{default:n((()=>[c("投稿")])),_:1},512),[[o,3===K.type]]),i(j,{type:"arrowdown",color:"#666",size:"18"})])),_:1},8,["onClick"])])),right:n((()=>[i(A,{class:"search-right",onClick:v.handleSearch},{default:n((()=>[c(" 搜索 ")])),_:1},8,["onClick"])])),default:n((()=>[i(A,{class:"search-center"},{default:n((()=>[i(E,{style:{width:"100%"},modelValue:K.searchKey,"onUpdate:modelValue":a[0]||(a[0]=e=>K.searchKey=e),radius:"100",placeholder:"搜索关键词",clearButton:"auto",cancelButton:"none",onConfirm:v.handleSearch,onClear:v.handleClear},null,8,["modelValue","onConfirm","onClear"])])),_:1})])),_:1}),i(G,{ref:"udbRef",where:v.where,collection:"turtle_soups",orderby:"order desc,create_date desc",loadtime:"manual"},{default:n((({data:e,loading:a,error:l,options:r,hasMore:m})=>[l?(t(),s(A,{key:0},{default:n((()=>[c(u(l.message),1)])),_:2},1024)):(t(),s(A,{key:1},{default:n((()=>[i(q,{class:"list"},{default:n((()=>[(t(!0),p(f,null,h(e,((e,a)=>(t(),p(f,{key:e._id},[K.bannerUnitId&&(a+1)%15==0?(t(),s(V,{key:0,unitId:K.bannerUnitId},null,8,["unitId"])):b("",!0),K.bannerAdpid&&(a+1)%15==0?(t(),s(V,{key:1,adpid:K.bannerAdpid},null,8,["adpid"])):b("",!0),i(M,{link:"",title:e.title,note:e.question,ellipsis:2,to:"/pages/turtleSoupDetails/turtleSoupDetails?id="+e._id},{footer:n((()=>[i(A,{class:"tag-wrap"},{default:n((()=>[d(i(z,{size:"mini",text:"经典",type:"warning",inverted:"",circle:""},null,512),[[o,1===e.classic]]),d(i(z,{size:"mini",text:"投稿",type:"error",inverted:"",circle:""},null,512),[[o,1===e.contribute]]),d(i(z,{size:"mini",text:"精选",type:"error",inverted:"",circle:""},null,512),[[o,1===e.chosen]])])),_:2},1024)])),_:2},1032,["title","note","to"])],64)))),128))])),_:2},1024)])),_:2},1024)),a?(t(),s(A,{key:2,class:"loading"},{default:n((()=>[c("加载中...")])),_:1})):b("",!0),m?b("",!0):(t(),s(B,{key:3,status:"noMore"}))])),_:1},8,["where"])])),_:1})}],["__scopeId","data-v-c8ccc0b5"]]);export{K as default};
