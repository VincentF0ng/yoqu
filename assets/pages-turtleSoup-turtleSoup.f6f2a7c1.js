import{y as e,z as t,o as a,a as s,w as l,p as n,g as r,d as i,A as o,B as d,f as c,t as u,q as p,u as h,F as f,b as m,i as b,r as y}from"./index-e5341511.js";import{_}from"./uni-icons.a504894d.js";import{_ as g,r as k}from"./uni-app.es.9a200687.js";import{_ as w,a as S,b as C,c as R,d as x}from"./unicloud-db.7819e209.js";import{_ as $}from"./uni-tag.2e47d357.js";import{_ as U}from"./uni-load-more.65ca77d9.js";const v=g({data:()=>({bannerAdpid:"",bannerUnitId:"",type:0,searchKey:""}),computed:{where(){const e=this.searchKey.trim();let t="";switch(this.type){case 1:t="&& chosen == 1";break;case 2:t="&& classic == 1";break;case 3:t="&& contribute == 1";break;default:t=""}return`\n\t\t\t\t(${new RegExp(e,"i")}.test(title) || ${new RegExp(e,"i")}.test(question) || ${new RegExp(e,"i")}.test(answer)) && \n\t\t\t\tstatus == 2\n\t\t\t\t${t}\n\t\t\t`}},methods:{handleTypeSelect(){e({itemList:["全部","精选好汤","经典老汤","网友投稿"],success:e=>{this.type=e.tapIndex,this.$nextTick((e=>{this.handleSearch()}))}})},handleSearch(){this.$refs.udbRef.loadData({clear:!0})},handleClear(){this.searchKey="",this.$nextTick((e=>{this.$refs.udbRef.loadData({clear:!0})}))}},onReady(){this.$refs.udbRef.loadData({clear:!0})},onLoad(){n().getConfig().then((e=>{this.bannerAdpid=e.bannerAdpid||"",this.bannerUnitId=e.bannerUnitId||""}))},onPullDownRefresh(){this.$refs.udbRef.loadData({clear:!0},(()=>{t()}))},onReachBottom(){this.$refs.udbRef.loadMore()},onShareAppMessage:()=>({title:"海龟汤 - 是，否，与此无关？",path:"/pages/turtleSoup/turtleSoup",imageUrl:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-9c9554a3-d4de-4f0f-b941-dfe1990da1c1/67ffde71-5506-47e8-b8e1-a900aae92998.png"}),onShareTimeline:()=>({title:"海龟汤 - 是，否，与此无关？",path:"/pages/turtleSoup/turtleSoup",imageUrl:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-9c9554a3-d4de-4f0f-b941-dfe1990da1c1/67ffde71-5506-47e8-b8e1-a900aae92998.png"})},[["render",function(e,t,n,g,v,D){const K=b,j=k(y("uni-icons"),_),z=r,A=k(y("uni-search-bar"),w),E=k(y("uni-nav-bar"),S),I=k(y("uni-tag"),$),T=k(y("uni-list-item"),C),V=k(y("uni-list"),R),B=k(y("uni-load-more"),U),M=k(y("unicloud-db"),x);return a(),s(z,{class:"container"},{default:l((()=>[i(E,{class:"search-wrap"},{left:l((()=>[i(z,{class:"search-left",onClick:D.handleTypeSelect},{default:l((()=>[o(i(K,null,{default:l((()=>[c("全部")])),_:1},512),[[d,0===v.type]]),o(i(K,null,{default:l((()=>[c("精选")])),_:1},512),[[d,1===v.type]]),o(i(K,null,{default:l((()=>[c("经典")])),_:1},512),[[d,2===v.type]]),o(i(K,null,{default:l((()=>[c("投稿")])),_:1},512),[[d,3===v.type]]),i(j,{type:"arrowdown",color:"#666",size:"18"})])),_:1},8,["onClick"])])),right:l((()=>[i(z,{class:"search-right",onClick:D.handleSearch},{default:l((()=>[c(" 搜索 ")])),_:1},8,["onClick"])])),default:l((()=>[i(z,{class:"search-center"},{default:l((()=>[i(A,{style:{width:"100%"},modelValue:v.searchKey,"onUpdate:modelValue":t[0]||(t[0]=e=>v.searchKey=e),radius:"100",placeholder:"搜索关键词",clearButton:"auto",cancelButton:"none",onConfirm:D.handleSearch,onClear:D.handleClear},null,8,["modelValue","onConfirm","onClear"])])),_:1})])),_:1}),i(M,{ref:"udbRef",where:D.where,collection:"turtle_soups",orderby:"order desc,create_date desc",loadtime:"manual"},{default:l((({data:e,loading:t,error:n,options:r,hasMore:b})=>[n?(a(),s(z,{key:0},{default:l((()=>[c(u(n.message),1)])),_:2},1024)):(a(),s(z,{key:1},{default:l((()=>[i(V,{class:"list"},{default:l((()=>[(a(!0),p(f,null,h(e,((e,t)=>(a(),s(T,{key:e._id,link:"",title:e.title,note:e.question,ellipsis:2,to:"/pages/turtleSoupDetails/turtleSoupDetails?id="+e._id},{footer:l((()=>[i(z,{class:"tag-wrap"},{default:l((()=>[o(i(I,{size:"mini",text:"经典",type:"warning",inverted:"",circle:""},null,512),[[d,1===e.classic]]),o(i(I,{size:"mini",text:"投稿",type:"error",inverted:"",circle:""},null,512),[[d,1===e.contribute]]),o(i(I,{size:"mini",text:"精选",type:"error",inverted:"",circle:""},null,512),[[d,1===e.chosen]])])),_:2},1024)])),_:2},1032,["title","note","to"])))),128))])),_:2},1024)])),_:2},1024)),t?(a(),s(z,{key:2,class:"loading"},{default:l((()=>[c("加载中...")])),_:1})):m("",!0),b?m("",!0):(a(),s(B,{key:3,status:"noMore"}))])),_:1},8,["where"])])),_:1})}],["__scopeId","data-v-0861ec9a"]]);export{v as default};
